{% extends 'base.html' %}
{% block content %}
<h2 class="text-2xl font-bold mb-4">Associations</h2>
<div x-data="{ showForm: false }" class="mb-4">
  <button 
    @click="showForm = !showForm"
    class="px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700">
    + New Association
  </button>
  <form x-show="showForm" method="post" action="/associations" class="mt-4 flex gap-2 items-end" @submit="showForm = false">
    <div>
      <label for="user_group_id" class="block text-sm font-medium text-gray-700">User Group</label>
      <select name="user_group_id" id="user_group_id" required class="mt-1 px-2 py-1 border rounded w-48">
        {% for group in user_groups %}
          <option value="{{ group.group_id }}">{{ group.name }}</option>
        {% endfor %}
      </select>
    </div>
    <div>
      <label for="url_group_id" class="block text-sm font-medium text-gray-700">URL Group</label>
      <select name="url_group_id" id="url_group_id" required class="mt-1 px-2 py-1 border rounded w-48">
        {% for group in url_groups %}
          <option value="{{ group.group_id }}">{{ group.name }}</option>
        {% endfor %}
      </select>
    </div>
    <button type="submit" class="px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700">Create</button>
  </form>
</div>
<ul class="divide-y divide-gray-200">
  {% for assoc in associations %}
    <li class="py-2 flex items-center gap-4">
      <span>User Group: {{ assoc.user_group_name }} &rarr; URL Group: {{ assoc.url_group_name }}</span>
      <form method="post" action="/associations/remove" style="display:inline;">
        <input type="hidden" name="user_group_id" value="{{ assoc.user_group_id }}">
        <input type="hidden" name="url_group_id" value="{{ assoc.url_group_id }}">
        <button type="submit" class="text-xs px-2 py-1 bg-red-500 text-white rounded">Remove</button>
      </form>
    </li>
  {% endfor %}
</ul>
{% endblock %} 